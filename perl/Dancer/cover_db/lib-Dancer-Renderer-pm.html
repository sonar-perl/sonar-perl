<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 1.36
Devel::Cover is copyright 2001-2019, Paul Johnson (paul@pjcj.net)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: lib/Dancer/Renderer.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">lib/Dancer/Renderer.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c1">85.8%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>pod</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package Dancer::Renderer;</td></tr>
<tr><td class="h">2</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># ABSTRACT: Rendering class for Dancer</td></tr>
<tr><td class="h">3</td><td colspan="7"></td></tr><tr><td class="h">4</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L4">163</a></div></td><td></td><td><div>972</div><div>179</div><div>3029</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">5</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L5">163</a></div></td><td></td><td><div>421</div><div>178</div><div>3057</div></td><td class="s">use warnings;</td></tr>
<tr><td class="h">6</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L6">163</a></div></td><td></td><td><div>428</div><div>209</div><div>4145</div></td><td class="s">use Carp;</td></tr>
<tr><td class="h">7</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L7">163</a></div></td><td></td><td><div>441</div><div>171</div><div>2614</div></td><td class="s">use HTTP::Headers;</td></tr>
<tr><td class="h">8</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L8">163</a></div></td><td></td><td><div>66914</div><div>495164</div><div>7126</div></td><td class="s">use HTTP::Date qw( str2time time2str );</td></tr>
<tr><td class="h">9</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L9">163</a></div></td><td></td><td><div>2308</div><div>199</div><div>2341</div></td><td class="s">use Dancer::Route;</td></tr>
<tr><td class="h">10</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L10">163</a></div></td><td></td><td><div>435</div><div>207</div><div>2694</div></td><td class="s">use Dancer::HTTP;</td></tr>
<tr><td class="h">11</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L11">163</a></div></td><td></td><td><div>457</div><div>169</div><div>1678</div></td><td class="s">use Dancer::Cookie;</td></tr>
<tr><td class="h">12</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L12">163</a></div></td><td></td><td><div>432</div><div>188</div><div>1834</div></td><td class="s">use Dancer::Factory::Hook;</td></tr>
<tr><td class="h">13</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L13">163</a></div></td><td></td><td><div>384</div><div>148</div><div>1468</div></td><td class="s">use Dancer::Cookies;</td></tr>
<tr><td class="h">14</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L14">163</a></div></td><td></td><td><div>349</div><div>175</div><div>1453</div></td><td class="s">use Dancer::Request;</td></tr>
<tr><td class="h">15</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L15">163</a></div></td><td></td><td><div>409</div><div>178</div><div>1413</div></td><td class="s">use Dancer::Response;</td></tr>
<tr><td class="h">16</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L16">163</a></div></td><td></td><td><div>71111</div><div>231</div><div>2986</div></td><td class="s">use Dancer::Serializer;</td></tr>
<tr><td class="h">17</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L17">163</a></div></td><td></td><td><div>483</div><div>170</div><div>4231</div></td><td class="s">use Dancer::Config &#39;setting&#39;;</td></tr>
<tr><td class="h">18</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L18">163</a></div></td><td></td><td><div>457</div><div>187</div><div>4039</div></td><td class="s">use Dancer::FileUtils qw(path path_or_empty dirname read_file_content open_file);</td></tr>
<tr><td class="h">19</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L19">163</a></div></td><td></td><td><div>382</div><div>168</div><div>1478</div></td><td class="s">use Dancer::SharedData;</td></tr>
<tr><td class="h">20</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L20">163</a></div></td><td></td><td><div>371</div><div>160</div><div>1390</div></td><td class="s">use Dancer::Logger;</td></tr>
<tr><td class="h">21</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L21">163</a></div></td><td></td><td><div>356</div><div>144</div><div>1580</div></td><td class="s">use Dancer::MIME;</td></tr>
<tr><td class="h">22</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L22">163</a></div></td><td></td><td><div>379</div><div>159</div><div>130116</div></td><td class="s">use Dancer::Exception qw(:all);</td></tr>
<tr><td class="h">23</td><td colspan="7"></td></tr><tr><td class="h">24</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Dancer::Factory::Hook-&gt;instance-&gt;install_hooks(</td></tr>
<tr><td class="h">25</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;qw/before after before_serializer after_serializer before_file_render after_file_render/</td></tr>
<tr><td class="h">26</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">27</td><td colspan="7"></td></tr><tr><td class="h">28</td><td><div class="c3">512</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L28">512</a></div></td><td><div class="c0">0</div></td><td><div>687</div></td><td class="s">sub render_file { get_file_response() }</td></tr>
<tr><td class="h">29</td><td colspan="7"></td></tr><tr><td class="h">30</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub render_action {</td></tr>
<tr><td class="h">31</td><td><div class="c3">507</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L31">507</a></div></td><td><div class="c0">0</div></td><td><div>452</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $class = shift;</td></tr>
<tr><td class="h">32</td><td><div class="c3">507</div></td><td></td><td></td><td></td><td></td><td><div>770</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $resp = $class-&gt;get_action_response();</td></tr>
<tr><td class="h">33</td><td><div class="c3">464</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Renderer-pm--branch.html#L33">100</a></div></td><td></td><td></td><td></td><td><div>826</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return (defined $resp)</td></tr>
<tr><td class="h">34</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? response_with_headers()</td></tr>
<tr><td class="h">35</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: undef;</td></tr>
<tr><td class="h">36</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">37</td><td colspan="7"></td></tr><tr><td class="h">38</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub render_error {</td></tr>
<tr><td class="h">39</td><td><div class="c3">32</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L39">32</a></div></td><td><div class="c0">0</div></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($class, $error_code) = @_;</td></tr>
<tr><td class="h">40</td><td colspan="7"></td></tr><tr><td class="h">41</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>93</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $app&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= Dancer::App-&gt;current;</td></tr>
<tr><td class="h">42</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $static_file = path($app-&gt;setting(&#39;public&#39;), &quot;$error_code.html&quot;);</td></tr>
<tr><td class="h">43</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>78</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $response&nbsp;&nbsp;&nbsp;&nbsp;= Dancer::Renderer-&gt;get_file_response_for_path(</td></tr>
<tr><td class="h">44</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$static_file =&gt; $error_code);</td></tr>
<tr><td class="h">45</td><td><div class="c3">32</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Renderer-pm--branch.html#L45">100</a></div></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $response if $response;</td></tr>
<tr><td class="h">46</td><td colspan="7"></td></tr><tr><td class="h">47</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>99</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return Dancer::Response-&gt;new(</td></tr>
<tr><td class="h">48</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status&nbsp;&nbsp;=&gt; $error_code,</td></tr>
<tr><td class="h">49</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;headers =&gt; [&#39;Content-Type&#39; =&gt; &#39;text/html&#39;],</td></tr>
<tr><td class="h">50</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content =&gt; Dancer::Renderer-&gt;html_page(</td></tr>
<tr><td class="h">51</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;Error $error_code&quot; =&gt; &quot;&lt;h2&gt;Unable to process your query&lt;/h2&gt;&quot;</td></tr>
<tr><td class="h">52</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;The page you requested is not available&quot;</td></tr>
<tr><td class="h">53</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">54</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">55</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">56</td><td colspan="7"></td></tr><tr><td class="h">57</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Takes a response object and add default headers</td></tr>
<tr><td class="h">58</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub response_with_headers {</td></tr>
<tr><td class="h">59</td><td><div class="c3">445</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L59">445</a></div></td><td><div class="c0">0</div></td><td><div>604</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $response = Dancer::SharedData-&gt;response();</td></tr>
<tr><td class="h">60</td><td colspan="7"></td></tr><tr><td class="h">61</td><td><div class="c3">445</div></td><td><div class="c0" title="T/-"><a href="lib-Dancer-Renderer-pm--branch.html#L61">50</a></div></td><td></td><td></td><td></td><td><div>577</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (Dancer::Config::setting(&#39;server_tokens&#39;)) {</td></tr>
<tr><td class="h">62</td><td><div class="c3">445</div></td><td></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L62">33</a></div></td><td></td><td></td><td><div>598</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;{headers} ||= HTTP::Headers-&gt;new;</td></tr>
<tr><td class="h">63</td><td><div class="c3">445</div></td><td></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L63">50</a></div></td><td></td><td></td><td><div>1446</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $powered_by = &quot;Perl Dancer &quot; . ( Dancer-&gt;VERSION || &#39;&#39; );</td></tr>
<tr><td class="h">64</td><td><div class="c3">445</div></td><td></td><td></td><td></td><td></td><td><div>740</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;header(&#39;X-Powered-By&#39; =&gt; $powered_by);</td></tr>
<tr><td class="h">65</td><td><div class="c3">445</div></td><td></td><td></td><td></td><td></td><td><div>13480</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;header(&#39;Server&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $powered_by);</td></tr>
<tr><td class="h">66</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">67</td><td colspan="7"></td></tr><tr><td class="h">68</td><td><div class="c3">445</div></td><td></td><td></td><td></td><td></td><td><div>9617</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $response;</td></tr>
<tr><td class="h">69</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">70</td><td colspan="7"></td></tr><tr><td class="h">71</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub html_page {</td></tr>
<tr><td class="h">72</td><td><div class="c3">37</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L72">37</a></div></td><td><div class="c0">0</div></td><td><div>77</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($class, $title, $content, $style) = @_;</td></tr>
<tr><td class="h">73</td><td><div class="c3">37</div></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--condition.html#L73">100</a></div></td><td></td><td></td><td><div>98</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$style ||= &#39;style&#39;;</td></tr>
<tr><td class="h">74</td><td colspan="7"></td></tr><tr><td class="h">75</td><td><div class="c3">37</div></td><td></td><td></td><td></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $template = $class-&gt;templates-&gt;{&#39;default&#39;};</td></tr>
<tr><td class="h">76</td><td><div class="c3">37</div></td><td></td><td></td><td></td><td></td><td><div>187</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ts&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= Dancer::Template::Simple-&gt;new;</td></tr>
<tr><td class="h">77</td><td colspan="7"></td></tr><tr><td class="h">78</td><td><div class="c3">37</div></td><td></td><td></td><td></td><td></td><td><div>133</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ts-&gt;render(</td></tr>
<tr><td class="h">79</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\$template,</td></tr>
<tr><td class="h">80</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;title&nbsp;&nbsp;&nbsp;=&gt; $title,</td></tr>
<tr><td class="h">81</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style&nbsp;&nbsp;&nbsp;=&gt; $style,</td></tr>
<tr><td class="h">82</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version =&gt; $Dancer::VERSION,</td></tr>
<tr><td class="h">83</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content =&gt; $content</td></tr>
<tr><td class="h">84</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">85</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">86</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">87</td><td colspan="7"></td></tr><tr><td class="h">88</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub get_action_response {</td></tr>
<tr><td class="h">89</td><td><div class="c3">531</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L89">531</a></div></td><td><div class="c0">0</div></td><td><div>505</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $class = shift;</td></tr>
<tr><td class="h">90</td><td><div class="c3">531</div></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--condition.html#L90">100</a></div></td><td></td><td></td><td><div>889</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $depth = shift || 1;</td></tr>
<tr><td class="h">91</td><td colspan="7"></td></tr><tr><td class="h">92</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# save the request before the filters are ran</td></tr>
<tr><td class="h">93</td><td><div class="c3">531</div></td><td></td><td></td><td></td><td></td><td><div>830</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $request = Dancer::SharedData-&gt;request;</td></tr>
<tr><td class="h">94</td><td><div class="c3">531</div></td><td></td><td></td><td></td><td></td><td><div>731</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($method, $path) = ($request-&gt;method, $request-&gt;path_info);</td></tr>
<tr><td class="h">95</td><td colspan="7"></td></tr><tr><td class="h">96</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# look for a matching route handler, for the given request</td></tr>
<tr><td class="h">97</td><td><div class="c3">531</div></td><td></td><td></td><td></td><td></td><td><div>777</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $handler =</td></tr>
<tr><td class="h">98</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::App-&gt;find_route_through_apps(Dancer::SharedData-&gt;request);</td></tr>
<tr><td class="h">99</td><td colspan="7"></td></tr><tr><td class="h">100</td><td><div class="c3">531</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Renderer-pm--branch.html#L100">100</a></div></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L100">67</a></div></td><td></td><td></td><td><div>833</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $app = ($handler &amp;&amp; $handler-&gt;app) ? $handler-&gt;app : Dancer::App-&gt;current();</td></tr>
<tr><td class="h">101</td><td colspan="7"></td></tr><tr><td class="h">102</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# run the before filters, before &quot;running&quot; the route handler</td></tr>
<tr><td class="h">103</td><td><div class="c3">531</div></td><td></td><td></td><td></td><td></td><td><div>885</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Factory::Hook-&gt;instance-&gt;execute_hooks(&#39;before&#39;, $handler);</td></tr>
<tr><td class="h">104</td><td colspan="7"></td></tr><tr><td class="h">105</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# recurse if something has changed</td></tr>
<tr><td class="h">106</td><td><div class="c3">527</div></td><td></td><td></td><td></td><td></td><td><div>970</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $MAX_RECURSIVE_LOOP = 10;</td></tr>
<tr><td class="h">107</td><td><div class="c3">527</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Renderer-pm--branch.html#L107">100</a></div></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L107">67</a></div></td><td></td><td></td><td><div>693</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (&nbsp;&nbsp;&nbsp;($path ne Dancer::SharedData-&gt;request-&gt;path_info)</td></tr>
<tr><td class="h">108</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| ($method ne Dancer::SharedData-&gt;request-&gt;method))</td></tr>
<tr><td class="h">109</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">110</td><td><div class="c3">26</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Renderer-pm--branch.html#L110">100</a></div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($depth &gt; $MAX_RECURSIVE_LOOP) {</td></tr>
<tr><td class="h">111</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raise core_renderer =&gt; &quot;infinite loop detected, &quot;</td></tr>
<tr><td class="h">112</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;check your route/filters for &quot;</td></tr>
<tr><td class="h">113</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $method . &#39; &#39;</td></tr>
<tr><td class="h">114</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $path;</td></tr>
<tr><td class="h">115</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">116</td><td><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $class-&gt;get_action_response($depth + 1);</td></tr>
<tr><td class="h">117</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">118</td><td colspan="7"></td></tr><tr><td class="h">119</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# redirect immediately - skip route execution</td></tr>
<tr><td class="h">120</td><td><div class="c3">501</div></td><td></td><td></td><td></td><td></td><td><div>790</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $response = Dancer::SharedData-&gt;response();</td></tr>
<tr><td class="h">121</td><td><div class="c3">501</div></td><td><div class="c0" title="T/-"><a href="lib-Dancer-Renderer-pm--branch.html#L121">50</a></div></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L121">33</a></div></td><td></td><td></td><td><div>1003</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined $response &amp;&amp; (my $status = $response-&gt;status)) {</td></tr>
<tr><td class="h">122</td><td><div class="c3">501</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Renderer-pm--branch.html#L122">100</a></div></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L122">67</a></div></td><td></td><td></td><td><div>923</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($status == 302 || $status == 301) {</td></tr>
<tr><td class="h">123</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$class-&gt;serialize_response_if_needed();</td></tr>
<tr><td class="h">124</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Factory::Hook-&gt;instance-&gt;execute_hooks(&#39;after&#39;, $response);</td></tr>
<tr><td class="h">125</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $response;</td></tr>
<tr><td class="h">126</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">127</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">128</td><td colspan="7"></td></tr><tr><td class="h">129</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# execute the action</td></tr>
<tr><td class="h">130</td><td><div class="c3">495</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Renderer-pm--branch.html#L130">100</a></div></td><td></td><td></td><td></td><td><div>600</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($handler) {</td></tr>
<tr><td class="h">131</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# a response may exist, produced by a before filter</td></tr>
<tr><td class="h">132</td><td><div class="c3">476</div></td><td><div class="c0" title="-/F"><a href="lib-Dancer-Renderer-pm--branch.html#L132">50</a></div></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L132">33</a></div></td><td></td><td></td><td><div>757</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $class-&gt;serialize_response_if_needed() if defined $response &amp;&amp; $response-&gt;exists;</td></tr>
<tr><td class="h">133</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# else, get the route handler&#39;s response</td></tr>
<tr><td class="h">134</td><td><div class="c3">476</div></td><td></td><td></td><td></td><td></td><td><div>837</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::App-&gt;current($handler-&gt;{app});</td></tr>
<tr><td class="h">135</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {</td></tr>
<tr><td class="h">136</td><td><div class="c3">476</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L136">476</a></div></td><td></td><td><div>8235</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$handler-&gt;run($request);</td></tr>
<tr><td class="h">137</td><td><div class="c3">439</div></td><td></td><td></td><td></td><td></td><td><div>710</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$class-&gt;serialize_response_if_needed();</td></tr>
<tr><td class="h">138</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} continuation {</td></tr>
<tr><td class="h">139</td><td><div class="c3">9</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L139">9</a></div></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($continuation) = @_;</td></tr>
<tr><td class="h">140</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If we have a Route continuation, run the after hook, then</td></tr>
<tr><td class="h">141</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# propagate the continuation</td></tr>
<tr><td class="h">142</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $resp = Dancer::SharedData-&gt;response();</td></tr>
<tr><td class="h">143</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Factory::Hook-&gt;instance-&gt;execute_hooks(&#39;after&#39;, $resp);</td></tr>
<tr><td class="h">144</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$continuation-&gt;rethrow();</td></tr>
<tr><td class="h">145</td><td><div class="c3">476</div></td><td></td><td></td><td></td><td></td><td><div>1909</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">146</td><td><div class="c3">439</div></td><td></td><td></td><td></td><td></td><td><div>4107</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $resp = Dancer::SharedData-&gt;response();</td></tr>
<tr><td class="h">147</td><td><div class="c3">439</div></td><td></td><td></td><td></td><td></td><td><div>715</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Factory::Hook-&gt;instance-&gt;execute_hooks(&#39;after&#39;, $resp);</td></tr>
<tr><td class="h">148</td><td><div class="c3">439</div></td><td></td><td></td><td></td><td></td><td><div>1432</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $resp;</td></tr>
<tr><td class="h">149</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">150</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">151</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return undef;&nbsp;&nbsp;&nbsp;&nbsp;# 404</td></tr>
<tr><td class="h">152</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">153</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">154</td><td colspan="7"></td></tr><tr><td class="h">155</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub render_autopage {</td></tr>
<tr><td class="h">156</td><td><div class="c3">19</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Renderer-pm--branch.html#L156">100</a></div></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L156">19</a></div></td><td><div class="c0">0</div></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return unless Dancer::setting(&#39;auto_page&#39;);</td></tr>
<tr><td class="h">157</td><td colspan="7"></td></tr><tr><td class="h">158</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $request = Dancer::SharedData-&gt;request;</td></tr>
<tr><td class="h">159</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $path = $request-&gt;path_info;</td></tr>
<tr><td class="h">160</td><td colspan="7"></td></tr><tr><td class="h">161</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# See if we find a matching view for this request, if so, render it</td></tr>
<tr><td class="h">162</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $viewpath = $path;</td></tr>
<tr><td class="h">163</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$viewpath =~ s{^/}{};</td></tr>
<tr><td class="h">164</td><td><div class="c3">8</div></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--condition.html#L164">100</a></div></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $view = Dancer::engine(&#39;template&#39;)-&gt;view($viewpath) || &#39;&#39;;</td></tr>
<tr><td class="h">165</td><td colspan="7"></td></tr><tr><td class="h">166</td><td><div class="c3">8</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Renderer-pm--branch.html#L166">100</a></div></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L166">67</a></div></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($view &amp;&amp; -f $view) {</td></tr>
<tr><td class="h">167</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# A view exists for the path requested, go ahead and render it:</td></tr>
<tr><td class="h">168</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _autopage_response($viewpath);</td></tr>
<tr><td class="h">169</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">170</td><td colspan="7"></td></tr><tr><td class="h">171</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Try appending &quot;index&quot; and looking again</td></tr>
<tr><td class="h">172</td><td><div class="c3">3</div></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--condition.html#L172">100</a></div></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$view = Dancer::engine(&#39;template&#39;)-&gt;view(</td></tr>
<tr><td class="h">173</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::FileUtils::path($viewpath, &#39;index&#39;)</td></tr>
<tr><td class="h">174</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;)|| &#39;&#39;;</td></tr>
<tr><td class="h">175</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Dancer::error(&quot;Looking for $viewpath/index - got $view&quot;);</td></tr>
<tr><td class="h">176</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Renderer-pm--branch.html#L176">100</a></div></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L176">67</a></div></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($view &amp;&amp; -f $view) {</td></tr>
<tr><td class="h">177</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _autopage_response(</td></tr>
<tr><td class="h">178</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::FileUtils::path($viewpath, &#39;index&#39;)</td></tr>
<tr><td class="h">179</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">180</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">181</td><td colspan="7"></td></tr><tr><td class="h">182</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">183</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">184</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _autopage_response {</td></tr>
<tr><td class="h">185</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L185">7</a></div></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $viewpath = shift;</td></tr>
<tr><td class="h">186</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $response = Dancer::Response-&gt;new;</td></tr>
<tr><td class="h">187</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;status(200);</td></tr>
<tr><td class="h">188</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;content(</td></tr>
<tr><td class="h">189</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::template($viewpath)</td></tr>
<tr><td class="h">190</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">191</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;header( &#39;Content-Type&#39; =&gt; &#39;text/html&#39; );</td></tr>
<tr><td class="h">192</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>253</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $response;</td></tr>
<tr><td class="h">193</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">194</td><td colspan="7"></td></tr><tr><td class="h">195</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub serialize_response_if_needed {</td></tr>
<tr><td class="h">196</td><td><div class="c3">445</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L196">445</a></div></td><td><div class="c0">0</div></td><td><div>564</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $response = Dancer::SharedData-&gt;response();</td></tr>
<tr><td class="h">197</td><td colspan="7"></td></tr><tr><td class="h">198</td><td><div class="c3">445</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Renderer-pm--branch.html#L198">100</a></div></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L198">67</a></div></td><td></td><td></td><td><div>677</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (Dancer::App-&gt;current-&gt;setting(&#39;serializer&#39;) &amp;&amp; $response-&gt;content()){</td></tr>
<tr><td class="h">199</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Factory::Hook-&gt;execute_hooks(&#39;before_serializer&#39;, $response);</td></tr>
<tr><td class="h">200</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {</td></tr>
<tr><td class="h">201</td><td><div class="c3">30</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L201">30</a></div></td><td></td><td><div>475</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Serializer-&gt;process_response($response);</td></tr>
<tr><td class="h">202</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} continuation {</td></tr>
<tr><td class="h">203</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--subroutine.html#L203">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($continuation) = @_;</td></tr>
<tr><td class="h">204</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If we have a Route continuation, run the after hook, then</td></tr>
<tr><td class="h">205</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# propagate the continuation</td></tr>
<tr><td class="h">206</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Factory::Hook-&gt;execute_hooks(&#39;after_serializer&#39;, $response);</td></tr>
<tr><td class="h">207</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$continuation-&gt;rethrow();</td></tr>
<tr><td class="h">208</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>106</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">209</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>316</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Factory::Hook-&gt;execute_hooks(&#39;after_serializer&#39;, $response);</td></tr>
<tr><td class="h">210</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">211</td><td><div class="c3">445</div></td><td></td><td></td><td></td><td></td><td><div>1203</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $response;</td></tr>
<tr><td class="h">212</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">213</td><td colspan="7"></td></tr><tr><td class="h">214</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub get_file_response {</td></tr>
<tr><td class="h">215</td><td><div class="c3">525</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L215">525</a></div></td><td><div class="c0">0</div></td><td><div>671</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $request&nbsp;&nbsp;&nbsp;= Dancer::SharedData-&gt;request;</td></tr>
<tr><td class="h">216</td><td><div class="c3">525</div></td><td></td><td></td><td></td><td></td><td><div>734</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $path_info = $request-&gt;path_info;</td></tr>
<tr><td class="h">217</td><td colspan="7"></td></tr><tr><td class="h">218</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# requests that have \0 in path are forbidden</td></tr>
<tr><td class="h">219</td><td><div class="c3">525</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Renderer-pm--branch.html#L219">100</a></div></td><td></td><td></td><td></td><td><div>934</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( $path_info =~ /\0/ ) {</td></tr>
<tr><td class="h">220</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_bad_request();</td></tr>
<tr><td class="h">221</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">222</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">223</td><td colspan="7"></td></tr><tr><td class="h">224</td><td><div class="c3">524</div></td><td></td><td></td><td></td><td></td><td><div>708</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $app = Dancer::App-&gt;current;</td></tr>
<tr><td class="h">225</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# TODO: this should be later removed with a check whether the file exists</td></tr>
<tr><td class="h">226</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# and then returning a 404</td></tr>
<tr><td class="h">227</td><td><div class="c3">524</div></td><td><div class="c0" title="T/-"><a href="lib-Dancer-Renderer-pm--branch.html#L227">50</a></div></td><td></td><td></td><td></td><td><div>725</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $public = defined $app-&gt;setting(&#39;public&#39;) ?</td></tr>
<tr><td class="h">228</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$app-&gt;setting(&#39;public&#39;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</td></tr>
<tr><td class="h">229</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;&#39;;</td></tr>
<tr><td class="h">230</td><td colspan="7"></td></tr><tr><td class="h">231</td><td><div class="c3">524</div></td><td></td><td></td><td></td><td></td><td><div>1055</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $static_file = path( $public, $path_info );</td></tr>
<tr><td class="h">232</td><td colspan="7"></td></tr><tr><td class="h">233</td><td><div class="c3">524</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Renderer-pm--branch.html#L233">100</a></div></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L233">67</a></div><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L233">50</a></div></td><td></td><td></td><td><div>1106</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if ( !$static_file</td></tr>
<tr><td class="h">234</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| index( $static_file, ( path($public) || &#39;&#39; ) ) != 0 );</td></tr>
<tr><td class="h">235</td><td colspan="7"></td></tr><tr><td class="h">236</td><td><div class="c3">522</div></td><td></td><td></td><td></td><td></td><td><div>798</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return Dancer::Renderer-&gt;get_file_response_for_path( $static_file, undef,</td></tr>
<tr><td class="h">237</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request-&gt;content_type );</td></tr>
<tr><td class="h">238</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">239</td><td colspan="7"></td></tr><tr><td class="h">240</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub get_file_response_for_path {</td></tr>
<tr><td class="h">241</td><td><div class="c3">556</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L241">556</a></div></td><td><div class="c0">0</div></td><td><div>714</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($class, $static_file, $status, $mime) = @_;</td></tr>
<tr><td class="h">242</td><td colspan="7"></td></tr><tr><td class="h">243</td><td><div class="c3">556</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Renderer-pm--branch.html#L243">100</a></div></td><td></td><td></td><td></td><td><div>5831</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( -f $static_file ) {</td></tr>
<tr><td class="h">244</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Factory::Hook-&gt;execute_hooks( &#39;before_file_render&#39;,</td></tr>
<tr><td class="h">245</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$static_file );</td></tr>
<tr><td class="h">246</td><td colspan="7"></td></tr><tr><td class="h">247</td><td><div class="c3">16</div></td><td></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L247">33</a></div></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $response = Dancer::SharedData-&gt;response() || Dancer::Response-&gt;new();</td></tr>
<tr><td class="h">248</td><td colspan="7"></td></tr><tr><td class="h">249</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# handle If-Modified-Since</td></tr>
<tr><td class="h">250</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>139</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $last_modified = (stat $static_file)[9];</td></tr>
<tr><td class="h">251</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $since = str2time(Dancer::SharedData-&gt;request-&gt;env-&gt;{HTTP_IF_MODIFIED_SINCE});</td></tr>
<tr><td class="h">252</td><td><div class="c3">16</div></td><td><div class="c0" title="-/F"><a href="lib-Dancer-Renderer-pm--branch.html#L252">50</a></div></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L252">33</a></div></td><td></td><td></td><td><div>93</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $since &amp;&amp; $since &gt;= $last_modified ) {</td></tr>
<tr><td class="h">253</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;status( 304 );</td></tr>
<tr><td class="h">254</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;content( &#39;&#39; );</td></tr>
<tr><td class="h">255</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $response;</td></tr>
<tr><td class="h">256</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">257</td><td colspan="7"></td></tr><tr><td class="h">258</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fh = open_file( &#39;&lt;&#39;, $static_file );</td></tr>
<tr><td class="h">259</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binmode $fh;</td></tr>
<tr><td class="h">260</td><td><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Renderer-pm--branch.html#L260">100</a></div></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;status($status) if ($status);</td></tr>
<tr><td class="h">261</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;header( &#39;Last-Modified&#39; =&gt; time2str( $last_modified ) );</td></tr>
<tr><td class="h">262</td><td><div class="c3">16</div></td><td></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L262">67</a></div></td><td></td><td></td><td><div>694</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;header(&#39;Content-Type&#39; =&gt; (($mime &amp;&amp; _get_full_mime_type($mime)) ||</td></tr>
<tr><td class="h">263</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::SharedData-&gt;request-&gt;content_type ||</td></tr>
<tr><td class="h">264</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_get_mime_type($static_file)));</td></tr>
<tr><td class="h">265</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>502</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;content($fh);</td></tr>
<tr><td class="h">266</td><td colspan="7"></td></tr><tr><td class="h">267</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>83</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Factory::Hook-&gt;execute_hooks( &#39;after_file_render&#39;, $response );</td></tr>
<tr><td class="h">268</td><td colspan="7"></td></tr><tr><td class="h">269</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>98</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $response;</td></tr>
<tr><td class="h">270</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">271</td><td><div class="c3">540</div></td><td></td><td></td><td></td><td></td><td><div>1639</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">272</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">273</td><td colspan="7"></td></tr><tr><td class="h">274</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># private</td></tr>
<tr><td class="h">275</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _get_full_mime_type {</td></tr>
<tr><td class="h">276</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L276">1</a></div></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $mime = Dancer::MIME-&gt;instance();</td></tr>
<tr><td class="h">277</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $mime-&gt;name_or_type(shift @_);</td></tr>
<tr><td class="h">278</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">279</td><td colspan="7"></td></tr><tr><td class="h">280</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _get_mime_type {</td></tr>
<tr><td class="h">281</td><td><div class="c3">14</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L281">14</a></div></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $file = shift;</td></tr>
<tr><td class="h">282</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $mime = Dancer::MIME-&gt;instance();</td></tr>
<tr><td class="h">283</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $mime-&gt;for_file($file);</td></tr>
<tr><td class="h">284</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">285</td><td colspan="7"></td></tr><tr><td class="h">286</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _bad_request{</td></tr>
<tr><td class="h">287</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L287">33</a></div></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L287">1</a></div></td><td></td><td><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $response = Dancer::SharedData-&gt;response() || Dancer::Response-&gt;new();</td></tr>
<tr><td class="h">288</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;status(400);</td></tr>
<tr><td class="h">289</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;content(&#39;Bad Request&#39;);</td></tr>
<tr><td class="h">290</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">291</td><td colspan="7"></td></tr><tr><td class="h">292</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># set of builtin templates needed by Dancer when rendering HTML pages</td></tr>
<tr><td class="h">293</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub templates {</td></tr>
<tr><td class="h">294</td><td><div class="c3">37</div></td><td></td><td><div class="c0"><a href="lib-Dancer-Renderer-pm--condition.html#L294">50</a></div></td><td><div class="c3"><a href="lib-Dancer-Renderer-pm--subroutine.html#L294">37</a></div></td><td><div class="c0">0</div></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $charset = setting(&#39;charset&#39;) || &#39;UTF-8&#39;;</td></tr>
<tr><td class="h">295</td><td><div class="c3">37</div></td><td></td><td></td><td></td><td></td><td><div>96</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;default =&gt;</td></tr>
<tr><td class="h">296</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;</td></tr>
<tr><td class="h">297</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</td></tr>
<tr><td class="h">298</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&lt;html&gt;</td></tr>
<tr><td class="h">299</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&lt;head&gt;</td></tr>
<tr><td class="h">300</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&lt;title&gt;&lt;% title %&gt;&lt;/title&gt;</td></tr>
<tr><td class="h">301</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&lt;link rel=&quot;stylesheet&quot; href=&quot;/css/&lt;% style %&gt;.css&quot; /&gt;</td></tr>
<tr><td class="h">302</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&lt;meta http-equiv=&quot;Content-type&quot; content=&quot;text/html; charset=&#39; . $charset</td></tr>
<tr><td class="h">303</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &#39;&quot; /&gt;</td></tr>
<tr><td class="h">304</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&lt;/head&gt;</td></tr>
<tr><td class="h">305</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&lt;body&gt;</td></tr>
<tr><td class="h">306</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&lt;h1&gt;&lt;% title %&gt;&lt;/h1&gt;</td></tr>
<tr><td class="h">307</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&lt;div id=&quot;content&quot;&gt;</td></tr>
<tr><td class="h">308</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&lt;% content %&gt;</td></tr>
<tr><td class="h">309</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&lt;/div&gt;</td></tr>
<tr><td class="h">310</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&lt;div id=&quot;footer&quot;&gt;</td></tr>
<tr><td class="h">311</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Powered by &lt;a href=&quot;http://perldancer.org/&quot;&gt;Dancer&lt;/a&gt; &lt;% version %&gt;</td></tr>
<tr><td class="h">312</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&lt;/div&gt;</td></tr>
<tr><td class="h">313</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&lt;/body&gt;</td></tr>
<tr><td class="h">314</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&lt;/html&gt;&#39;,</td></tr>
<tr><td class="h">315</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">316</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">317</td><td colspan="7"></td></tr><tr><td class="h">318</td><td colspan="7"></td></tr><tr><td class="h">319</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
</table>
</body>
</html>
