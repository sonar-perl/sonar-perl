<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 1.36
Devel::Cover is copyright 2001-2019, Paul Johnson (paul@pjcj.net)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: lib/Dancer/Error.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">lib/Dancer/Error.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c2">92.5%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>pod</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package Dancer::Error;</td></tr>
<tr><td class="h">2</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#ABSTRACT: class for representing fatal errors</td></tr>
<tr><td class="h">3</td><td colspan="7"></td></tr><tr><td class="h">4</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L4">163</a></div></td><td></td><td><div>59130</div><div>185</div><div>2914</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">5</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L5">163</a></div></td><td></td><td><div>370</div><div>189</div><div>3730</div></td><td class="s">use warnings;</td></tr>
<tr><td class="h">6</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L6">163</a></div></td><td></td><td><div>412</div><div>172</div><div>4761</div></td><td class="s">use Carp;</td></tr>
<tr><td class="h">7</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L7">163</a></div></td><td></td><td><div>455</div><div>218</div><div>3454</div></td><td class="s">use Scalar::Util qw(blessed);</td></tr>
<tr><td class="h">8</td><td colspan="7"></td></tr><tr><td class="h">9</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L9">163</a></div></td><td></td><td><div>404</div><div>246</div><div>7531</div></td><td class="s">use base &#39;Dancer::Object&#39;;</td></tr>
<tr><td class="h">10</td><td colspan="7"></td></tr><tr><td class="h">11</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L11">163</a></div></td><td></td><td><div>877</div><div>200</div><div>2092</div></td><td class="s">use Dancer::Response;</td></tr>
<tr><td class="h">12</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L12">163</a></div></td><td></td><td><div>68764</div><div>277</div><div>3154</div></td><td class="s">use Dancer::Renderer;</td></tr>
<tr><td class="h">13</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L13">163</a></div></td><td></td><td><div>533</div><div>207</div><div>3499</div></td><td class="s">use Dancer::Config &#39;setting&#39;;</td></tr>
<tr><td class="h">14</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L14">163</a></div></td><td></td><td><div>393</div><div>172</div><div>1587</div></td><td class="s">use Dancer::Logger;</td></tr>
<tr><td class="h">15</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L15">163</a></div></td><td></td><td><div>325</div><div>172</div><div>1404</div></td><td class="s">use Dancer::Factory::Hook;</td></tr>
<tr><td class="h">16</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L16">163</a></div></td><td></td><td><div>361</div><div>168</div><div>1599</div></td><td class="s">use Dancer::Session;</td></tr>
<tr><td class="h">17</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L17">163</a></div></td><td></td><td><div>326</div><div>158</div><div>2593</div></td><td class="s">use Dancer::FileUtils qw(open_file);</td></tr>
<tr><td class="h">18</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L18">163</a></div></td><td></td><td><div>387</div><div>171</div><div>1556</div></td><td class="s">use Dancer::Engine;</td></tr>
<tr><td class="h">19</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L19">163</a></div></td><td></td><td><div>331</div><div>204</div><div>80829</div></td><td class="s">use Dancer::Exception qw(:all);</td></tr>
<tr><td class="h">20</td><td colspan="7"></td></tr><tr><td class="h">21</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">Dancer::Factory::Hook-&gt;instance-&gt;install_hooks(</td></tr>
<tr><td class="h">22</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;qw/before_error_render after_error_render before_error_init/);</td></tr>
<tr><td class="h">23</td><td colspan="7"></td></tr><tr><td class="h">24</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub init {</td></tr>
<tr><td class="h">25</td><td><div class="c3">53</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L25">53</a></div></td><td><div class="c3">1</div></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($self) = @_;</td></tr>
<tr><td class="h">26</td><td colspan="7"></td></tr><tr><td class="h">27</td><td><div class="c3">53</div></td><td></td><td></td><td></td><td></td><td><div>97</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Factory::Hook-&gt;instance-&gt;execute_hooks(&#39;before_error_init&#39;, $self);</td></tr>
<tr><td class="h">28</td><td colspan="7"></td></tr><tr><td class="h">29</td><td><div class="c3">53</div></td><td></td><td></td><td></td><td></td><td><div>114</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;attributes_defaults(</td></tr>
<tr><td class="h">30</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title =&gt; &#39;Error &#39; . $self-&gt;code,</td></tr>
<tr><td class="h">31</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;&nbsp;=&gt; &#39;runtime error&#39;,</td></tr>
<tr><td class="h">32</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">33</td><td colspan="7"></td></tr><tr><td class="h">34</td><td><div class="c3">53</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L34">100</a></div></td><td></td><td></td><td></td><td><div>96</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;has_serializer</td></tr>
<tr><td class="h">35</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and return;</td></tr>
<tr><td class="h">36</td><td colspan="7"></td></tr><tr><td class="h">37</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $html_output = &quot;&lt;h2&gt;&quot; . $self-&gt;{type} . &quot;&lt;/h2&gt;&quot;;</td></tr>
<tr><td class="h">38</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>80</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$html_output .= $self-&gt;backtrace;</td></tr>
<tr><td class="h">39</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>101</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$html_output .= $self-&gt;environment;</td></tr>
<tr><td class="h">40</td><td colspan="7"></td></tr><tr><td class="h">41</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>102</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{message} = $html_output;</td></tr>
<tr><td class="h">42</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">43</td><td colspan="7"></td></tr><tr><td class="h">44</td><td><div class="c3">53</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L44">53</a></div></td><td><div class="c0">0</div></td><td><div>82</div></td><td class="s">sub has_serializer { setting(&#39;serializer&#39;) }</td></tr>
<tr><td class="h">45</td><td><div class="c3">123</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L45">123</a></div></td><td><div class="c3">1</div></td><td><div>423</div></td><td class="s">sub code&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $_[0]-&gt;{code} }</td></tr>
<tr><td class="h">46</td><td><div class="c3">26</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L46">26</a></div></td><td><div class="c3">1</div></td><td><div>229</div></td><td class="s">sub title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $_[0]-&gt;{title} }</td></tr>
<tr><td class="h">47</td><td><div class="c3">39</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L47">39</a></div></td><td><div class="c3">1</div></td><td><div>74</div></td><td class="s">sub message&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $_[0]-&gt;{message} }</td></tr>
<tr><td class="h">48</td><td><div class="c3">47</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L48">47</a></div></td><td><div class="c3">1</div></td><td><div>90</div></td><td class="s">sub exception&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $_[0]-&gt;{exception} }</td></tr>
<tr><td class="h">49</td><td colspan="7"></td></tr><tr><td class="h">50</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub backtrace {</td></tr>
<tr><td class="h">51</td><td><div class="c3">46</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L51">46</a></div></td><td><div class="c3">1</div></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($self) = @_;</td></tr>
<tr><td class="h">52</td><td colspan="7"></td></tr><tr><td class="h">53</td><td><div class="c3">46</div></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--condition.html#L53">100</a></div></td><td></td><td></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{message} ||= &quot;&quot;;</td></tr>
<tr><td class="h">54</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $message =</td></tr>
<tr><td class="h">55</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>104</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qq|&lt;pre class=&quot;error&quot;&gt;| . _html_encode($self-&gt;{message}) . &quot;&lt;/pre&gt;&quot;;</td></tr>
<tr><td class="h">56</td><td colspan="7"></td></tr><tr><td class="h">57</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# the default perl warning/error pattern</td></tr>
<tr><td class="h">58</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>191</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($file, $line) = ($message =~ /at (\S+) line (\d+)/);</td></tr>
<tr><td class="h">59</td><td colspan="7"></td></tr><tr><td class="h">60</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# the Devel::SimpleTrace pattern</td></tr>
<tr><td class="h">61</td><td><div class="c3">46</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L61">100</a></div></td><td><div class="c0"><a href="lib-Dancer-Error-pm--condition.html#L61">67</a></div></td><td></td><td></td><td><div>127</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;($file, $line) = ($message =~ /at.*\((\S+):(\d+)\)/)</td></tr>
<tr><td class="h">62</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless $file and $line;</td></tr>
<tr><td class="h">63</td><td colspan="7"></td></tr><tr><td class="h">64</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# no file/line found, cannot open a file for context</td></tr>
<tr><td class="h">65</td><td><div class="c3">46</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L65">100</a></div></td><td><div class="c0"><a href="lib-Dancer-Error-pm--condition.html#L65">67</a></div></td><td></td><td></td><td><div>88</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $message unless ($file and $line);</td></tr>
<tr><td class="h">66</td><td colspan="7"></td></tr><tr><td class="h">67</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# file and line are located, let&#39;s read the source Luke!</td></tr>
<tr><td class="h">68</td><td><div class="c3">36</div></td><td><div class="c0" title="-/F"><a href="lib-Dancer-Error-pm--branch.html#L68">50</a></div></td><td></td><td></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fh = open_file(&#39;&lt;&#39;, $file) or return $message;</td></tr>
<tr><td class="h">69</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td></td><td><div>459</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @lines = &lt;$fh&gt;;</td></tr>
<tr><td class="h">70</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td></td><td><div>2629</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;close $fh;</td></tr>
<tr><td class="h">71</td><td colspan="7"></td></tr><tr><td class="h">72</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $backtrace = $message;</td></tr>
<tr><td class="h">73</td><td colspan="7"></td></tr><tr><td class="h">74</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td></td><td><div>61</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$backtrace</td></tr>
<tr><td class="h">75</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.= qq|&lt;div class=&quot;title&quot;&gt;| . &quot;$file around line $line&quot; . &quot;&lt;/div&gt;&quot;;</td></tr>
<tr><td class="h">76</td><td colspan="7"></td></tr><tr><td class="h">77</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$backtrace .= qq|&lt;pre class=&quot;content&quot;&gt;|;</td></tr>
<tr><td class="h">78</td><td colspan="7"></td></tr><tr><td class="h">79</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$line--;</td></tr>
<tr><td class="h">80</td><td><div class="c3">36</div></td><td><div class="c0" title="T/-"><a href="lib-Dancer-Error-pm--branch.html#L80">50</a></div></td><td></td><td></td><td></td><td><div>83</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $start = (($line - 3) &gt;= 0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? ($line - 3) : 0;</td></tr>
<tr><td class="h">81</td><td><div class="c3">36</div></td><td><div class="c0" title="T/-"><a href="lib-Dancer-Error-pm--branch.html#L81">50</a></div></td><td></td><td></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $stop&nbsp;&nbsp;= (($line + 3) &lt; scalar(@lines)) ? ($line + 3) : scalar(@lines);</td></tr>
<tr><td class="h">82</td><td colspan="7"></td></tr><tr><td class="h">83</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td></td><td><div>90</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for (my $l = $start; $l &lt;= $stop; $l++) {</td></tr>
<tr><td class="h">84</td><td><div class="c3">252</div></td><td></td><td></td><td></td><td></td><td><div>179</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chomp $lines[$l];</td></tr>
<tr><td class="h">85</td><td colspan="7"></td></tr><tr><td class="h">86</td><td><div class="c3">252</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L86">100</a></div></td><td></td><td></td><td></td><td><div>244</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($l == $line) {</td></tr>
<tr><td class="h">87</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$backtrace</td></tr>
<tr><td class="h">88</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.= qq|&lt;span class=&quot;nu&quot;&gt;|</td></tr>
<tr><td class="h">89</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. tabulate($l + 1, $stop + 1)</td></tr>
<tr><td class="h">90</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. qq|&lt;/span&gt; &lt;span style=&quot;color: red;&quot;&gt;|</td></tr>
<tr><td class="h">91</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. _html_encode($lines[$l])</td></tr>
<tr><td class="h">92</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;&lt;/span&gt;\n&quot;;</td></tr>
<tr><td class="h">93</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">94</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">95</td><td><div class="c3">216</div></td><td></td><td></td><td></td><td></td><td><div>202</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$backtrace</td></tr>
<tr><td class="h">96</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.= qq|&lt;span class=&quot;nu&quot;&gt;|</td></tr>
<tr><td class="h">97</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. tabulate($l + 1, $stop + 1)</td></tr>
<tr><td class="h">98</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;&lt;/span&gt; &quot;</td></tr>
<tr><td class="h">99</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. _html_encode($lines[$l]) . &quot;\n&quot;;</td></tr>
<tr><td class="h">100</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">101</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">102</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$backtrace .= &quot;&lt;/pre&gt;&quot;;</td></tr>
<tr><td class="h">103</td><td colspan="7"></td></tr><tr><td class="h">104</td><td colspan="7"></td></tr><tr><td class="h">105</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td></td><td><div>356</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $backtrace;</td></tr>
<tr><td class="h">106</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">107</td><td colspan="7"></td></tr><tr><td class="h">108</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub tabulate {</td></tr>
<tr><td class="h">109</td><td><div class="c3">252</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L109">252</a></div></td><td><div class="c3">1</div></td><td><div>177</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($number, $max) = @_;</td></tr>
<tr><td class="h">110</td><td><div class="c3">252</div></td><td></td><td></td><td></td><td></td><td><div>190</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $len = length($max);</td></tr>
<tr><td class="h">111</td><td><div class="c3">252</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L111">100</a></div></td><td></td><td></td><td></td><td><div>322</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $number if length($number) == $len;</td></tr>
<tr><td class="h">112</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &quot; $number&quot;;</td></tr>
<tr><td class="h">113</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">114</td><td colspan="7"></td></tr><tr><td class="h">115</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub dumper {</td></tr>
<tr><td class="h">116</td><td><div class="c3">139</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L116">139</a></div></td><td><div class="c3">1</div></td><td><div>348</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $obj = shift;</td></tr>
<tr><td class="h">117</td><td><div class="c3">139</div></td><td><div class="c0" title="-/F"><a href="lib-Dancer-Error-pm--branch.html#L117">50</a></div></td><td></td><td></td><td></td><td><div>353</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &quot;Unavailable without Data::Dumper&quot;</td></tr>
<tr><td class="h">118</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless Dancer::ModuleLoader-&gt;load(&#39;Data::Dumper&#39;);</td></tr>
<tr><td class="h">119</td><td colspan="7"></td></tr><tr><td class="h">120</td><td colspan="7"></td></tr><tr><td class="h">121</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Take a copy of the data, so we can mask sensitive-looking stuff:</td></tr>
<tr><td class="h">122</td><td><div class="c3">139</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L122">100</a></div></td><td></td><td></td><td></td><td><div>180</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $data&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= Dancer::ModuleLoader-&gt;load(&#39;Clone&#39;) ?</td></tr>
<tr><td class="h">123</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clone::clone($obj)</td></tr>
<tr><td class="h">124</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: eval Data::Dumper-&gt;new([$obj])-&gt;Purity(1)-&gt;Terse(1)-&gt;Deepcopy(1)-&gt;Dump;</td></tr>
<tr><td class="h">125</td><td colspan="7"></td></tr><tr><td class="h">126</td><td><div class="c3">139</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L126">100</a></div></td><td></td><td></td><td></td><td><div>510</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$data = {%$data} if blessed($data); </td></tr>
<tr><td class="h">127</td><td colspan="7"></td></tr><tr><td class="h">128</td><td><div class="c3">139</div></td><td></td><td></td><td></td><td></td><td><div>225</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $censored = _censor($data);</td></tr>
<tr><td class="h">129</td><td colspan="7"></td></tr><tr><td class="h">130</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#use Data::Dumper;</td></tr>
<tr><td class="h">131</td><td><div class="c3">139</div></td><td></td><td></td><td></td><td></td><td><div>428</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dd = Data::Dumper-&gt;new([$data]);</td></tr>
<tr><td class="h">132</td><td><div class="c3">139</div></td><td></td><td></td><td></td><td></td><td><div>2646</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$dd-&gt;Terse(1)-&gt;Quotekeys(0)-&gt;Indent(1)-&gt;Sortkeys(1);</td></tr>
<tr><td class="h">133</td><td><div class="c3">139</div></td><td></td><td></td><td></td><td></td><td><div>2336</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $content = $dd-&gt;Dump();</td></tr>
<tr><td class="h">134</td><td><div class="c3">139</div></td><td></td><td></td><td></td><td></td><td><div>728764</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$content =~ s{(\s*)(\S+)(\s*)=&gt;}{$1&lt;span class=&quot;key&quot;&gt;$2&lt;/span&gt;$3 =&amp;gt;}g;</td></tr>
<tr><td class="h">135</td><td><div class="c3">139</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L135">100</a></div></td><td></td><td></td><td></td><td><div>1374</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($censored) {</td></tr>
<tr><td class="h">136</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L136">100</a></div></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content</td></tr>
<tr><td class="h">137</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.= &quot;\n\nNote: Values of $censored sensitive-looking key&quot;</td></tr>
<tr><td class="h">138</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. ($censored == 1 ? &#39;&#39; : &#39;s&#39;)</td></tr>
<tr><td class="h">139</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot; hidden\n&quot;;</td></tr>
<tr><td class="h">140</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">141</td><td><div class="c3">139</div></td><td></td><td></td><td></td><td></td><td><div>3004</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $content;</td></tr>
<tr><td class="h">142</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">143</td><td colspan="7"></td></tr><tr><td class="h">144</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Given a hashref, censor anything that looks sensitive.&nbsp;&nbsp;Returns number of</td></tr>
<tr><td class="h">145</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># items which were &quot;censored&quot;.</td></tr>
<tr><td class="h">146</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _censor {</td></tr>
<tr><td class="h">147</td><td><div class="c3">381</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L147">381</a></div></td><td></td><td><div>1119</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ( $hash, $recursecount ) = @_;</td></tr>
<tr><td class="h">148</td><td><div class="c3">381</div></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--condition.html#L148">100</a></div></td><td></td><td></td><td><div>612</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$recursecount ||= 0;</td></tr>
<tr><td class="h">149</td><td colspan="7"></td></tr><tr><td class="h">150</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# we&#39;re checking recursion ourselves, no need to warn</td></tr>
<tr><td class="h">151</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L151">163</a></div></td><td></td><td><div>657</div><div>236</div><div>85849</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no warnings &#39;recursion&#39;;</td></tr>
<tr><td class="h">152</td><td colspan="7"></td></tr><tr><td class="h">153</td><td><div class="c3">381</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L153">100</a></div></td><td></td><td></td><td></td><td><div>343</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( $recursecount++ &gt; 100 ) {</td></tr>
<tr><td class="h">154</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warn &quot;Data exceeding 100 levels, truncating\n&quot;;</td></tr>
<tr><td class="h">155</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $hash;</td></tr>
<tr><td class="h">156</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">157</td><td colspan="7"></td></tr><tr><td class="h">158</td><td><div class="c3">380</div></td><td><div class="c0" title="-/F"><a href="lib-Dancer-Error-pm--branch.html#L158">50</a></div></td><td><div class="c0"><a href="lib-Dancer-Error-pm--condition.html#L158">33</a></div></td><td></td><td></td><td><div>595</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (!$hash || ref $hash ne &#39;HASH&#39;) {</td></tr>
<tr><td class="h">159</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp &quot;_censor given incorrect input: $hash&quot;;</td></tr>
<tr><td class="h">160</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">161</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">162</td><td colspan="7"></td></tr><tr><td class="h">163</td><td><div class="c3">380</div></td><td></td><td></td><td></td><td></td><td><div>269</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $censored = 0;</td></tr>
<tr><td class="h">164</td><td><div class="c3">380</div></td><td></td><td></td><td></td><td></td><td><div>712</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for my $key (keys %$hash) {</td></tr>
<tr><td class="h">165</td><td><div class="c3">4990</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L165">100</a></div><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L165">100</a></div></td><td></td><td></td><td></td><td><div>9333</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (ref $hash-&gt;{$key} eq &#39;HASH&#39;) {</td></tr>
<tr><td class="h">166</td><td><div class="c3">241</div></td><td></td><td></td><td></td><td></td><td><div>315</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$censored += _censor( $hash-&gt;{$key}, $recursecount );</td></tr>
<tr><td class="h">167</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">168</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif ($key =~ /(pass|card?num|pan|cvv2?|ccv|secret|private_key|cookie_key)/i) {</td></tr>
<tr><td class="h">169</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$hash-&gt;{$key} = &quot;Hidden (looks potentially sensitive)&quot;;</td></tr>
<tr><td class="h">170</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$censored++;</td></tr>
<tr><td class="h">171</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">172</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">173</td><td colspan="7"></td></tr><tr><td class="h">174</td><td><div class="c3">380</div></td><td></td><td></td><td></td><td></td><td><div>421</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $censored;</td></tr>
<tr><td class="h">175</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">176</td><td colspan="7"></td></tr><tr><td class="h">177</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Replaces the entities that are illegal in (X)HTML.</td></tr>
<tr><td class="h">178</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _html_encode {</td></tr>
<tr><td class="h">179</td><td><div class="c3">298</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L179">298</a></div></td><td></td><td><div>271</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $value = shift;</td></tr>
<tr><td class="h">180</td><td colspan="7"></td></tr><tr><td class="h">181</td><td><div class="c3">298</div></td><td></td><td></td><td></td><td></td><td><div>282</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$value =~ s/&amp;/&amp;amp;/g;</td></tr>
<tr><td class="h">182</td><td><div class="c3">298</div></td><td></td><td></td><td></td><td></td><td><div>235</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$value =~ s/&lt;/&amp;lt;/g;</td></tr>
<tr><td class="h">183</td><td><div class="c3">298</div></td><td></td><td></td><td></td><td></td><td><div>326</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$value =~ s/&gt;/&amp;gt;/g;</td></tr>
<tr><td class="h">184</td><td><div class="c3">298</div></td><td></td><td></td><td></td><td></td><td><div>344</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$value =~ s/&#39;/&amp;#39;/g;</td></tr>
<tr><td class="h">185</td><td><div class="c3">298</div></td><td></td><td></td><td></td><td></td><td><div>311</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$value =~ s/&quot;/&amp;quot;/g;</td></tr>
<tr><td class="h">186</td><td colspan="7"></td></tr><tr><td class="h">187</td><td><div class="c3">298</div></td><td></td><td></td><td></td><td></td><td><div>500</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $value;</td></tr>
<tr><td class="h">188</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">189</td><td colspan="7"></td></tr><tr><td class="h">190</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub render {</td></tr>
<tr><td class="h">191</td><td><div class="c3">51</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L191">51</a></div></td><td><div class="c3">1</div></td><td><div>288</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">192</td><td colspan="7"></td></tr><tr><td class="h">193</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $serializer = setting(&#39;serializer&#39;);</td></tr>
<tr><td class="h">194</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>195</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Factory::Hook-&gt;instance-&gt;execute_hooks(&#39;before_error_render&#39;, $self);</td></tr>
<tr><td class="h">195</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $response;</td></tr>
<tr><td class="h">196</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;try {</td></tr>
<tr><td class="h">197</td><td><div class="c3">51</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L197">100</a></div></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L197">51</a></div></td><td></td><td><div>1094</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response = $serializer ? $self-&gt;_render_serialized() : $self-&gt;_render_html();</td></tr>
<tr><td class="h">198</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} continuation {</td></tr>
<tr><td class="h">199</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="lib-Dancer-Error-pm--subroutine.html#L199">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ($continuation) = @_;</td></tr>
<tr><td class="h">200</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# If we have a Route continuation, run the after hook, then</td></tr>
<tr><td class="h">201</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# propagate the continuation</td></tr>
<tr><td class="h">202</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Factory::Hook-&gt;instance-&gt;execute_hooks(&#39;after_error_render&#39;, $response);</td></tr>
<tr><td class="h">203</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$continuation-&gt;rethrow();</td></tr>
<tr><td class="h">204</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>249</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">205</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>612</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Factory::Hook-&gt;instance-&gt;execute_hooks(&#39;after_error_render&#39;, $response);</td></tr>
<tr><td class="h">206</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>326</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$response;</td></tr>
<tr><td class="h">207</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">208</td><td colspan="7"></td></tr><tr><td class="h">209</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _render_serialized {</td></tr>
<tr><td class="h">210</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L210">7</a></div></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">211</td><td colspan="7"></td></tr><tr><td class="h">212</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L212">100</a></div></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $message =</td></tr>
<tr><td class="h">213</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!ref $self-&gt;message ? {error =&gt; $self-&gt;message} : $self-&gt;message;</td></tr>
<tr><td class="h">214</td><td colspan="7"></td></tr><tr><td class="h">215</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L215">100</a></div></td><td><div class="c0"><a href="lib-Dancer-Error-pm--condition.html#L215">67</a></div></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (ref $message eq &#39;HASH&#39; &amp;&amp; defined $self-&gt;exception) {</td></tr>
<tr><td class="h">216</td><td><div class="c3">2</div></td><td><div class="c0" title="-/F"><a href="lib-Dancer-Error-pm--branch.html#L216">50</a></div></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (blessed($self-&gt;exception)) {</td></tr>
<tr><td class="h">217</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$message-&gt;{exception} = ref($self-&gt;exception);</td></tr>
<tr><td class="h">218</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$message-&gt;{exception} =~ s/^Dancer::Exception:://;</td></tr>
<tr><td class="h">219</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">220</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>1</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$message-&gt;{exception} = $self-&gt;exception;</td></tr>
<tr><td class="h">221</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">222</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">223</td><td colspan="7"></td></tr><tr><td class="h">224</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L224">100</a></div></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (setting(&#39;show_errors&#39;)) {</td></tr>
<tr><td class="h">225</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Response-&gt;new(</td></tr>
<tr><td class="h">226</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status&nbsp;&nbsp;=&gt; $self-&gt;code,</td></tr>
<tr><td class="h">227</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content =&gt; Dancer::Serializer-&gt;engine-&gt;serialize($message),</td></tr>
<tr><td class="h">228</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;headers =&gt; [&#39;Content-Type&#39; =&gt; Dancer::Serializer-&gt;engine-&gt;content_type]</td></tr>
<tr><td class="h">229</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">230</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">231</td><td colspan="7"></td></tr><tr><td class="h">232</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if show_errors is disabled, we don&#39;t expose the real error message to the</td></tr>
<tr><td class="h">233</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# outside world</td></tr>
<tr><td class="h">234</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">235</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Response-&gt;new(</td></tr>
<tr><td class="h">236</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status =&gt; $self-&gt;code,</td></tr>
<tr><td class="h">237</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content =&gt; &quot;An internal error occured&quot;,</td></tr>
<tr><td class="h">238</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">239</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">240</td><td colspan="7"></td></tr><tr><td class="h">241</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">242</td><td colspan="7"></td></tr><tr><td class="h">243</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _render_html {</td></tr>
<tr><td class="h">244</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L244">44</a></div></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">245</td><td colspan="7"></td></tr><tr><td class="h">246</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# I think it is irrelevant to look into show_errors. In the</td></tr>
<tr><td class="h">247</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# template the user can hide them if she desires so.</td></tr>
<tr><td class="h">248</td><td><div class="c3">44</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L248">100</a></div></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (setting(&quot;error_template&quot;)) {</td></tr>
<tr><td class="h">249</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $template_name = setting(&quot;error_template&quot;);</td></tr>
<tr><td class="h">250</td><td><div class="c3">18</div></td><td><div class="c0" title="T/-"><a href="lib-Dancer-Error-pm--branch.html#L250">50</a></div></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ops = {</td></tr>
<tr><td class="h">251</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title =&gt; $self-&gt;title,</td></tr>
<tr><td class="h">252</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message =&gt; $self-&gt;message,</td></tr>
<tr><td class="h">253</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code =&gt; $self-&gt;code,</td></tr>
<tr><td class="h">254</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defined $self-&gt;exception ? ( exception =&gt; $self-&gt;exception ) : (),</td></tr>
<tr><td class="h">255</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">256</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>78</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $content = Dancer::Engine-&gt;engine(&quot;template&quot;)-&gt;apply_renderer($template_name, $ops);</td></tr>
<tr><td class="h">257</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return Dancer::Response-&gt;new(</td></tr>
<tr><td class="h">258</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status =&gt; $self-&gt;code,</td></tr>
<tr><td class="h">259</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;headers =&gt; [&#39;Content-Type&#39; =&gt; &#39;text/html&#39;],</td></tr>
<tr><td class="h">260</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content =&gt; $content);</td></tr>
<tr><td class="h">261</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} else {</td></tr>
<tr><td class="h">262</td><td><div class="c3">26</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L262">100</a></div></td><td></td><td></td><td></td><td><div>76</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return Dancer::Response-&gt;new(</td></tr>
<tr><td class="h">263</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;status&nbsp;&nbsp;=&gt; $self-&gt;code,</td></tr>
<tr><td class="h">264</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;headers =&gt; [&#39;Content-Type&#39; =&gt; &#39;text/html&#39;],</td></tr>
<tr><td class="h">265</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content =&gt;</td></tr>
<tr><td class="h">266</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dancer::Renderer-&gt;html_page($self-&gt;title, $self-&gt;message, &#39;error&#39;)</td></tr>
<tr><td class="h">267</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) if setting(&#39;show_errors&#39;);</td></tr>
<tr><td class="h">268</td><td colspan="7"></td></tr><tr><td class="h">269</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return Dancer::Renderer-&gt;render_error($self-&gt;code);</td></tr>
<tr><td class="h">270</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">271</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">272</td><td colspan="7"></td></tr><tr><td class="h">273</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub environment {</td></tr>
<tr><td class="h">274</td><td><div class="c3">46</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L274">46</a></div></td><td><div class="c3">1</div></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($self) = @_;</td></tr>
<tr><td class="h">275</td><td colspan="7"></td></tr><tr><td class="h">276</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>126</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $request = Dancer::SharedData-&gt;request;</td></tr>
<tr><td class="h">277</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $r_env&nbsp;&nbsp;&nbsp;= {};</td></tr>
<tr><td class="h">278</td><td><div class="c3">46</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L278">100</a></div></td><td></td><td></td><td></td><td><div>102</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$r_env = $request-&gt;env if defined $request;</td></tr>
<tr><td class="h">279</td><td colspan="7"></td></tr><tr><td class="h">280</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>71</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $env =</td></tr>
<tr><td class="h">281</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qq|&lt;div class=&quot;title&quot;&gt;Environment&lt;/div&gt;&lt;pre class=&quot;content&quot;&gt;|</td></tr>
<tr><td class="h">282</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. dumper($r_env)</td></tr>
<tr><td class="h">283</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;&lt;/pre&gt;&quot;;</td></tr>
<tr><td class="h">284</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>307</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $settings =</td></tr>
<tr><td class="h">285</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qq|&lt;div class=&quot;title&quot;&gt;Settings&lt;/div&gt;&lt;pre class=&quot;content&quot;&gt;|</td></tr>
<tr><td class="h">286</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. dumper(Dancer::Config-&gt;settings)</td></tr>
<tr><td class="h">287</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;&lt;/pre&gt;&quot;;</td></tr>
<tr><td class="h">288</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>138</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $source =</td></tr>
<tr><td class="h">289</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qq|&lt;div class=&quot;title&quot;&gt;Stack&lt;/div&gt;&lt;pre class=&quot;content&quot;&gt;|</td></tr>
<tr><td class="h">290</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $self-&gt;get_caller</td></tr>
<tr><td class="h">291</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;&lt;/pre&gt;&quot;;</td></tr>
<tr><td class="h">292</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>84</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $session = &quot;&quot;;</td></tr>
<tr><td class="h">293</td><td colspan="7"></td></tr><tr><td class="h">294</td><td><div class="c3">46</div></td><td><div class="c3" title="T/F"><a href="lib-Dancer-Error-pm--branch.html#L294">100</a></div></td><td></td><td></td><td></td><td><div>102</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (setting(&#39;session&#39;)) {</td></tr>
<tr><td class="h">295</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>248</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$session =</td></tr>
<tr><td class="h">296</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qq[&lt;div class=&quot;title&quot;&gt;Session&lt;/div&gt;&lt;pre class=&quot;content&quot;&gt;]</td></tr>
<tr><td class="h">297</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. dumper(Dancer::Session-&gt;get)</td></tr>
<tr><td class="h">298</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;&lt;/pre&gt;&quot;;</td></tr>
<tr><td class="h">299</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">300</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>570</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &quot;$source $settings $session $env&quot;;</td></tr>
<tr><td class="h">301</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">302</td><td colspan="7"></td></tr><tr><td class="h">303</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub get_caller {</td></tr>
<tr><td class="h">304</td><td><div class="c3">46</div></td><td></td><td></td><td><div class="c3"><a href="lib-Dancer-Error-pm--subroutine.html#L304">46</a></div></td><td><div class="c3">1</div></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($self) = @_;</td></tr>
<tr><td class="h">305</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @stack;</td></tr>
<tr><td class="h">306</td><td colspan="7"></td></tr><tr><td class="h">307</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $deepness = 0;</td></tr>
<tr><td class="h">308</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>199</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while (my ($package, $file, $line) = caller($deepness++)) {</td></tr>
<tr><td class="h">309</td><td><div class="c3">599</div></td><td></td><td></td><td></td><td></td><td><div>1856</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @stack, &quot;$package in $file l. $line&quot;;</td></tr>
<tr><td class="h">310</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">311</td><td colspan="7"></td></tr><tr><td class="h">312</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>182</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return join(&quot;\n&quot;, reverse(@stack));</td></tr>
<tr><td class="h">313</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">314</td><td colspan="7"></td></tr><tr><td class="h">315</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
<tr><td class="h">316</td><td colspan="7"></td></tr></table>
</body>
</html>
